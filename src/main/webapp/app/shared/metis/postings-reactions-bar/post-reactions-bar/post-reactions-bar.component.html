<div class="me-0 row">
    <div class="col-auto p-0" *ngFor="let reactionCount of reactionCountMap | keyvalue">
        <button class="reaction-button clickable" [class.reaction-button--reacted]="reactionCount.value.hasReacted" (click)="updateReaction(reactionCount.key)">
            <ngx-emoji class="emoji" [emoji]="reactionCount.key" [size]="16"></ngx-emoji>
            <span class="emoji-count">{{ reactionCount.value.count }}</span>
        </button>
    </div>
    <div class="col-auto p-0" *ngIf="posting.pinned || currentUserIsAtLeastTutor">
        <button
            class="reaction-button"
            [class.reaction-button--pinnedOrArchived]="posting.pinned"
            [disabled]="!currentUserIsAtLeastTutor"
            (click)="currentUserIsAtLeastTutor && togglePin()"
        >
            <ngx-emoji class="emoji" [ngbTooltip]="pinTooltip | artemisTranslate" [emoji]="pinEmojiId" [size]="16"> </ngx-emoji>
        </button>
    </div>
    <div class="col-auto p-0" *ngIf="posting.archived || currentUserIsAtLeastTutor">
        <button
            class="reaction-button"
            [class.reaction-button--pinnedOrArchived]="posting.archived"
            [class.clickable]="currentUserIsAtLeastTutor"
            (click)="currentUserIsAtLeastTutor && toggleArchive()"
        >
            <ngx-emoji class="emoji" [ngbTooltip]="archiveTooltip | artemisTranslate" [emoji]="archiveEmojiId" [size]="16"> </ngx-emoji>
        </button>
    </div>
    <div class="col-auto px-0">
        <fa-icon
            [icon]="['far', 'smile']"
            class="reaction-button me-0 text-secondary clickable"
            (click)="showReactionSelector = !showReactionSelector"
            cdkOverlayOrigin
            #trigger="cdkOverlayOrigin"
            [ngbTooltip]="'artemisApp.metis.chooseReaction' | artemisTranslate"
        >
        </fa-icon>
    </div>
    <ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="showReactionSelector">
        <emoji-mart
            [emojisToShowFilter]="emojisToShowFilter"
            (emojiSelect)="selectReaction($event)"
            [emojiSize]="20"
            [categoriesIcons]="categoriesIcons"
            [showSingleCategory]="true"
            [showPreview]="false"
            [color]="'#0065bd'"
            [recent]="selectedCourseEmojis"
            [i18n]="{ search: 'artemisApp.metis.searchEmoji' | artemisTranslate, categories: { recent: 'artemisApp.metis.courseEmojiSelectionCategory' | artemisTranslate } }"
        ></emoji-mart>
    </ng-template>
</div>
