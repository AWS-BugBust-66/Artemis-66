<div>
    <div class="button-toolbar pull-right">
        <button class="btn btn-primary btn-sm" ng-click="$ctrl.export()"><i class="fa fa-download fa-fw"></i>&nbsp;Export
            to CSV
        </button>
        <button class="btn btn-primary btn-sm" ng-click="$ctrl.refresh()"><i class="fa fa-refresh fa-fw"></i>&nbsp;Refresh
        </button>
    </div>
    <div ng-switch on="$ctrl.showAllResults">
        <button class="btn btn-primary btn-sm" ng-switch-when="true" ng-click="$ctrl.toggleShowAllResults(false)">Show
            successful
        </button>
        <button class="btn btn-primary btn-sm" ng-switch-when="false" ng-click="$ctrl.toggleShowAllResults(true)">Show
            all
        </button>
    </div>
</div>
<table class="table">
    <thead>
    <tr>
        <th></th>
        <th>
            <a class="th-link" ng-click="$ctrl.sortColumn = 'participation.student.firstName'; $ctrl.sortReverse = !$ctrl.sortReverse">
                Student name</a>&nbsp;<i
            ng-class="{'fa fa-sort-asc': $ctrl.sortColumn === 'participation.student.firstName' && !$ctrl.sortReverse, 'fa fa-sort-desc': $ctrl.sortColumn === 'participation.student.firstName' && $ctrl.sortReverse}"></i>
        </th>
        <th>
            <a class="th-link" ng-click="$ctrl.sortColumn = 'buildCompletionDate'; $ctrl.sortReverse = !$ctrl.sortReverse">
                Build completion date</a>&nbsp;<i
            ng-class="{'fa fa-sort-asc': $ctrl.sortColumn === 'buildCompletionDate' && !$ctrl.sortReverse, 'fa fa-sort-desc': $ctrl.sortColumn === 'buildCompletionDate' && $ctrl.sortReverse}"></i>
        </th>
        <th>Build result</th>
        <th>
            <a class="th-link" ng-click="$ctrl.sortColumn = '$ctrl.buildDuration(buildCompletionDate, participation.initializationDate)'; $ctrl.sortReverse = !$ctrl.sortReverse">
                Duration</a>&nbsp;<i
            ng-class="{'fa fa-sort-asc': $ctrl.sortColumn === '$ctrl.buildDuration(buildCompletionDate, participation.initializationDate)' && !$ctrl.sortReverse, 'fa fa-sort-desc': $ctrl.sortColumn === '$ctrl.buildDuration(buildCompletionDate, participation.initializationDate)' && $ctrl.sortReverse}"></i>
        </th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="result in $ctrl.sortedResults = ($ctrl.results | orderBy:$ctrl.sortColumn:$ctrl.sortReverse) track by $index ">
        <td>{{ $index + 1 }}</td>
        <td>{{ result.participation.student.firstName }}</td>
        <td>{{ result.buildCompletionDate | date:'MMM d, y HH:mm:ss' }}</td>
        <td ng-switch on="result.buildSuccessful">
        <span ng-switch-when="true">
        <span class="text-success">
            <i class="fa fa-lg fa-check-circle-o"></i>&nbsp;{{result.resultString}}
        </span> (<span am-time-ago="result.buildCompletionDate"></span>)
    </span>
    <span ng-switch-when="false">
        <span class="text-danger">
            <i class="fa fa-lg fa-times-circle-o"></i>&nbsp;<a class="text-danger"
                                                               ng-click="$ctrl.showDetails(result)">{{result.resultString}}</a>
        </span> (<span am-time-ago="result.buildCompletionDate"></span>)
    </span>
        </td>
        <td>{{$ctrl.buildDuration(result.buildCompletionDate, result.participation.initializationDate)}} minutes</td>
    </tr>
    </tbody>
</table>
